表 数据库user表结构设计

| 字段       | 描述         | 类型          | 备注                                   |
| ---------- | ------------ | ------------- | -------------------------------------- |
| user_id    | 用户序号     | int (11)      | 主键，非空，自动递增                   |
| avatar_url | 用户头像地址 | varchar (255) |                                        |
| nick_name  | 用户昵称     | varchar (255) |                                        |
| gender     | 用户性别     | varchar (255) |                                        |
| openid     | 用户唯一ID   | varchar (255) |                                        |
| last_login | 上次登录时间 | datetime      |                                        |
| is_banned  | 封禁标识     | bit           |                                        |
| is_checker | 检票员标识   | bit           | 字段0标识为非检票员  字段1标识为检票员 |

admin_user表记录了管理员身份与客服身份的用户，见下方表 3.9所示， 此表包含有管理员序号、头像地址等信息。

表 数据库admin_user表设计

| 字段       | 描述           | 类型          | 备注                                                         |
| ---------- | -------------- | ------------- | ------------------------------------------------------------ |
| admin_id   | 管理员序号     | int (11)      | 主键，非空，自动递增                                         |
| avatar_url | 管理员头像地址 | varchar (255) |                                                              |
| name       | 管理员姓名     | varchar (255) |                                                              |
| password   | 管理员密码     | varchar (255) | 密码不会明文储存，而以散列函数形式进行单向存储。             |
| is_service | 客服标识       | bit           | 拥有此标识，则登记为受限管理员，无法授予其他管理员权限，仅允许有限编辑订单信息。  字段0标识为非客服  字段1标识为客服 |

order表保存了观众创建的订单，是本系统中的核心表页。见下方表 3.10所示，

order_id表项是该表页设计中的主键，需要保持唯一性，用以标识某个当前场次的售出情况。对于单个订单购入多个票单的情况，设计multi系列字段，用以方便查找单个用户同时购买的所有票单情况。

表 数据库order表设计

| 字段              | 描述                   | 类型           | 备注                                                         |
| ----------------- | ---------------------- | -------------- | ------------------------------------------------------------ |
| order_id          | 唯一订单号             | int (11)       | 主键，非空，自动递增                                         |
| order_session_id  | 订单购入的场次编号     | int (11)       | 非空                                                         |
| order_multi_id    | 多票订单号             | int (11)       | 若单个订单同时锁定多个票单，则为该订单生成一个相同标识码，称为多票订单号。 |
| order_user_id     | 该票单的购买用户的序号 | int (11)       |                                                              |
| order_price       | 该票单金额             | decimal (18,2) | 该表项对应票单的售出金额                                     |
| order_multi_price | 单个订单的总金额       | decimal (18,2) | 用户订单的售出总金额                                         |
| order_create_time | 订单的创建时间         | datetime       | 非空                                                         |
| order_pay_time    | 订单的支付时间         | datetime       |                                                              |
| order_close_time  | 订单的关闭时间         | datetime       |                                                              |
| order_status      | 订单状态               | int (2)        | 非空，订单拥有多个状态  0标识订单等待检票  1标识订单已被检票入场  2标识订单正等待付款  3标识订单请求退款中  4标识订单已退款，处于关闭状态 |